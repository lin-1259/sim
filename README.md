<p align="center">
  <a href="https://sim.ai" target="_blank" rel="noopener noreferrer">
    <img src="apps/sim/public/logo/reverse/text/large.png" alt="Sim Logo" width="500"/>
  </a>
</p>

<p align="center">在几分钟内构建和部署AI智能体工作流。</p>

<p align="center">
  <a href="https://sim.ai" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/sim.ai-6F3DFA" alt="Sim.ai"></a>
  <a href="https://discord.gg/Hr4UWYEcTT" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/Discord-Join%20Server-5865F2?logo=discord&logoColor=white" alt="Discord"></a>
  <a href="https://x.com/simdotai" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/twitter/follow/simstudioai?style=social" alt="Twitter"></a>
  <a href="https://docs.sim.ai" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/Docs-6F3DFA.svg" alt="Documentation"></a>
</p>

### 轻松构建工作流
在画布上可视化设计智能体工作流——连接智能体、工具和模块，然后立即运行它们。

<p align="center">
  <img src="apps/sim/public/static/workflow.gif" alt="Workflow Builder Demo" width="800"/>
</p>

### 用Copilot增强能力
利用Copilot生成节点、修复错误，并直接从自然语言迭代流程。

<p align="center">
  <img src="apps/sim/public/static/copilot.gif" alt="Copilot Demo" width="800"/>
</p>

### 集成向量数据库
上传文档到向量存储，让智能体基于您的特定内容回答问题。

<p align="center">
  <img src="apps/sim/public/static/knowledge.gif" alt="Knowledge Uploads and Retrieval Demo" width="800"/>
</p>

## 快速开始

### 云托管：[sim.ai](https://sim.ai)

<a href="https://sim.ai" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/sim.ai-6F3DFA?logo=data:image/svg%2bxml;base64,PHN2ZyB3aWR0aD0iNjE2IiBoZWlnaHQ9IjYxNiIgdmlld0JveD0iMCAwIDYxNiA2MTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTU5XzMxMykiPgo8cGF0aCBkPSJNNjE2IDBIMFY2MTZINjE2VjBaIiBmaWxsPSIjNkYzREZBIi8+CjxwYXRoIGQ9Ik04MyAzNjUuNTY3SDExM0MxMTMgMzczLjgwNSAxMTYgMzgwLjM3MyAxMjIgMzg1LjI3MkMxMjggMzg5Ljk0OCAxMzYuMTExIDM5Mi4yODUgMTQ2LjMzMyAzOTIuMjg1QzE1Ny40NDQgMzkyLjI4NSAxNjYgMzkwLjE3MSAxNzIgMzg1LjkzOUMxNzcuOTk5IDM4MS40ODcgMTgxIDM3NS41ODYgMTgxIDM2OC4yMzlDMTgxIDM2Mi44OTUgMTc5LjMzMyAzNTguNDQyIDE3NiAzNTQuODhDMTcyLjg4OSAzNTEuMzE4IDE2Ny4xMTEgMzQ4LjQyMiAxNTguNjY3IDM0Ni4xOTZMMTMwIDMzOS41MTdDMTE1LjU1NSAzMzUuOTU1IDEwNC43NzggMzMwLjQ5OSA5Ny42NjY1IDMyMy4xNTFDOTAuNzc3NSAzMTUuODA0IDg3LjMzMzQgMzA2LjExOSA4Ny4zMzM0IDI5NC4wOTZDODcuMzMzNCAyODQuMDc2IDg5Ljg4OSAyNzUuMzkyIDk0Ljk5OTYgMjY4LjA0NUMxMDAuMzMzIDI2MC42OTcgMTA3LjU1NSAyNTUuMDIgMTE2LjY2NiAyNTEuMDEyQzEyNiAyNDcuMDA0IDEzNi42NjcgMjQ1IDE0OC42NjYgMjQ1QzE2MC42NjcgMjQ1IDE3MSAyNDcuMTE2IDE3OS42NjcgMjUxLjM0NkMxODguNTU1IDI1NS41NzYgMTk1LjQ0NCAyNjEuNDc3IDIwMC4zMzMgMjY5LjA0N0MyMDUuNDQ0IDI3Ni42MTcgMjA4LjExMSAyODUuNjM0IDIwOC4zMzMgMjk2LjA5OUgxNzguMzMzQzE3OC4xMTEgMjg3LjYzOCAxNzUuMzMzIDI4MS4wNyAxNjkuOTk5IDI3Ni4zOTRDMTY0LjY2NiAyNzEuNzE5IDE1Ny4yMjIgMjY5LjM4MSAxNDcuNjY3IDI2OS4zODFDMTM3Ljg4OSAyNjkuMzgxIDEzMC4zMzMgMjcxLjQ5NiAxMjUgMjc1LjcyNkMxMTkuNjY2IDI3OS45NTcgMTE3IDI4NS43NDYgMTE3IDI5My4wOTNDMTE3IDMwNC4wMDMgMTI1IDMxMS40NjIgMTQxIDMxNS40N0wxNjkuNjY3IDMyMi40ODNDMTgzLjQ0NSAzMjUuNiAxOTMuNzc4IDMzMC43MjIgMjAwLjY2NyAzMzcuODQ3QzIwNy41NTUgMzQ0Ljc0OSAyMTEgMzU0LjIxMiAyMTEgMzY2LjIzNUMyMTEgMzc2LjQ3NyAyMDguMjIyIDM4NS40OTQgMjAyLjY2NiAzOTMuMjg3QzE5Ny4xMTEgNDAwLjg1NyAxODkuNDQ0IDQwNi43NTggMTc5LjY2NyA0MTAuOTg5QzE3MC4xMTEgNDE0Ljk5NiAxNTguNzc4IDQxNyAxNDUuNjY3IDQxN0MxMjYuNTU1IDQxNyAxMTEuMzMzIDQxMi4zMjUgOTkuOTk5NyA0MDIuOTczQzg4LjY2NjggMzkzLjYyMSA4MyAzODEuMTUzIDgzIDM2NS41NjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjMyLjI5MSA0MTNWMjUwLjA4MkMyNDQuNjg0IDI1NC42MTQgMjUwLjE0OCAyNTQuNjE0IDI2My4zNzEgMjUwLjA4MlY0MTNIMjMyLjI5MVpNMjQ3LjUgMjM5LjMxM0MyNDEuOTkgMjM5LjMxMyAyMzcuMTQgMjM3LjMxMyAyMzIuOTUyIDIzMy4zMTZDMjI4Ljk4NCAyMjkuMDk1IDIyNyAyMjQuMjA5IDIyNyAyMTguNjU2QzIyNyAyMTIuODgyIDIyOC45ODQgMjA3Ljk5NSAyMzIuOTUyIDIwMy45OTdDMjM3LjE0IDE5OS45OTkgMjQxLjk5IDE5OCAyNDcuNSAxOThDMjUzLjIzMSAxOTggMjU4LjA4IDE5OS45OTkgMjYyLjA0OSAyMDMuOTk3QzI2Ni4wMTYgMjA3Ljk5NSAyNjggMjEyLjg4MiAyNjggMjE4LjY1NkMyNjggMjI0LjIwOSAyNjYuMDE2IDIyOS4wOTUgMjYyLjA0OSAyMzMuMzE2QzI1OC4wOCAyMzcuMzEzIDI1My4yMzEgMjM5LjMxMyAyNDcuNSAyMzkuMzEzWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMxOS4zMzMgNDEzSDI4OFYyNDkuNjc2SDMxNlYyNzcuMjMzQzMxOS4zMzMgMjY4LjEwNCAzMjUuNzc4IDI2MC4zNjQgMzM0LjY2NyAyNTQuMzUyQzM0My43NzggMjQ4LjExNyAzNTQuNzc4IDI0NSAzNjcuNjY3IDI0NUMzODIuMTExIDI0NSAzOTQuMTEyIDI0OC44OTcgNDAzLjY2NyAyNTYuNjlDNDEzLjIyMiAyNjQuNDg0IDQxOS40NDQgMjc0LjgzNyA0MjIuMzM0IDI4Ny43NTJINDE2LjY2N0M0MTguODg5IDI3NC44MzcgNDI1IDI2NC40ODQgNDM1IDI1Ni42OUM0NDUgMjQ4Ljg5NyA0NTcuMzM0IDI0NSA0NzIgMjQ1QzQ5MC42NjYgMjQ1IDUwNS4zMzQgMjUwLjQ1NSA1MTYgMjYxLjM2NkM1MjYuNjY3IDI3Mi4yNzYgNTMyIDI4Ny4xOTUgNTMyIDMwNi4xMjFWNDEzSDUwMS4zMzNWMzEzLjgwNEM1MDEuMzMzIDMwMC44ODkgNDk4IDI5MC45ODEgNDkxLjMzMyAyODQuMDc4QzQ4NC44ODkgMjc2Ljk1MiA0NzYuMTExIDI3My4zOSA0NjUgMjczLjM5QzQ1Ny4yMjIgMjczLjM5IDQ1MC4zMzMgMjc1LjE3MSA0NDQuMzM0IDI3OC43MzRDNDM4LjU1NiAyODIuMDc0IDQzNCAyODYuOTcyIDQzMC42NjcgMjkzLjQzQzQyNy4zMzMgMjk5Ljg4NyA0MjUuNjY3IDMwNy40NTcgNDI1LjY2NyAzMTYuMTQxVjQxM0gzOTQuNjY3VjMxMy40NjlDMzk0LjY2NyAzMDAuNTU1IDM5MS40NDUgMjkwLjc1OCAzODUgMjg0LjA3OEMzNzguNTU2IDI3Ny4xNzUgMzY5Ljc3OCAyNzMuNzI0IDM1OC42NjcgMjczLjcyNEMzNTAuODg5IDI3My43MjQgMzQ0IDI3NS41MDUgMzM4IDI3OS4wNjhDMzMyLjIyMiAyODIuNDA4IDMyNy42NjcgMjg3LjMwNyAzMjQuMzMzIDI5My43NjNDMzIxIDI5OS45OTggMzE5LjMzMyAzMDcuNDU3IDMxOS4zMzMgMzE2LjE0MVY0MTNaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzExNTlfMzEzIj4KPHJlY3Qgd2lkdGg9IjYxNiIgaGVpZ2h0PSI2MTYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==&logoColor=white" alt="Sim.ai"></a>

### 自托管：NPM包

```bash
npx simstudio
```
→ http://localhost:3000

#### 注意
必须在您的机器上安装并运行Docker。

#### 选项

| 标志 | 描述 |
|------|-------------|
| `-p, --port <port>` | 运行Sim的端口（默认`3000`） |
| `--no-pull` | 跳过拉取最新的Docker镜像 |

### 自托管：Docker Compose

```bash
# 克隆仓库
git clone https://github.com/simstudioai/sim.git

# 进入项目目录
cd sim

# 启动Sim
docker compose -f docker-compose.prod.yml up -d
```

在[http://localhost:3000/](http://localhost:3000/)访问应用程序

#### 使用Ollama的本地模型

使用[Ollama](https://ollama.ai)通过本地AI模型运行Sim - 无需外部API：

```bash
# 启动时支持GPU（自动下载gemma3:4b模型）
docker compose -f docker-compose.ollama.yml --profile setup up -d

# 对于纯CPU系统：
docker compose -f docker-compose.ollama.yml --profile cpu --profile setup up -d
```

等待模型下载完成后，访问 [http://localhost:3000](http://localhost:3000)。使用以下命令添加更多模型：
```bash
docker compose -f docker-compose.ollama.yml exec ollama ollama pull llama3.1:8b
```

#### 使用外部Ollama实例

如果您已经在主机机器上运行Ollama（在Docker外部），您需要配置`OLLAMA_URL`以使用`host.docker.internal`而不是`localhost`：

```bash
# Docker Desktop（macOS/Windows）
OLLAMA_URL=http://host.docker.internal:11434 docker compose -f docker-compose.prod.yml up -d

# Linux（添加extra_hosts或使用主机IP）
docker compose -f docker-compose.prod.yml up -d  # 然后将OLLAMA_URL设置为您的主机IP
```

**为什么？** 当在Docker内运行时，`localhost`指的是容器本身，而不是您的主机机器。`host.docker.internal`是一个特殊的DNS名称，会解析到主机。

对于Linux用户，您可以选择：
- 使用您主机机器的实际IP地址（例如，`http://192.168.1.100:11434`）
- 在您的compose文件中的simstudio服务中添加`extra_hosts: ["host.docker.internal:host-gateway"]`

#### 使用vLLM

Sim还支持[vLLM](https://docs.vllm.ai/)用于具有OpenAI兼容API的自托管模型：

```bash
# 设置这些环境变量
VLLM_BASE_URL=http://your-vllm-server:8000
VLLM_API_KEY=your_optional_api_key  # 仅在您的vLLM实例需要认证时使用
```

当使用Docker运行时，如果vLLM在您的主机机器上，使用`host.docker.internal`（与上面的Ollama相同）。

### 自托管：开发容器

1. 使用[Remote - Containers扩展](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)打开VS Code
2. 打开项目并在提示时点击"在容器中重新打开"
3. 在终端中运行`bun run dev:full`或使用`sim-start`别名
   - 这将启动主应用程序和实时套接字服务器

### 自托管：手动设置

**要求：**
- [Bun](https://bun.sh/)运行时
- [Node.js](https://nodejs.org/) v20+（沙盒代码执行所需）
- 带有[pgvector扩展](https://github.com/pgvector/pgvector)的PostgreSQL 12+（AI嵌入所需）

**注意：** Sim使用向量嵌入来实现AI功能，如知识库和语义搜索，这需要`pgvector` PostgreSQL扩展。

1. 克隆并安装依赖项：

```bash
git clone https://github.com/simstudioai/sim.git
cd sim
bun install
```

2. 设置带有pgvector的PostgreSQL：

您需要带有`vector`扩展的PostgreSQL以支持嵌入。选择一个选项：

**选项A：使用Docker（推荐）**
```bash
# 启动带有pgvector扩展的PostgreSQL
docker run --name simstudio-db \
  -e POSTGRES_PASSWORD=your_password \
  -e POSTGRES_DB=simstudio \
  -p 5432:5432 -d \
  pgvector/pgvector:pg17
```

**选项B：手动安装**
- 安装PostgreSQL 12+和pgvector扩展
- 查看[pgvector安装指南](https://github.com/pgvector/pgvector#installation)

3. 设置环境：

```bash
cd apps/sim
cp .env.example .env  # 配置所需变量（DATABASE_URL, BETTER_AUTH_SECRET, BETTER_AUTH_URL）
```

更新您的`.env`文件中的数据库URL：
```bash
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/simstudio"
```

4. 设置数据库：

首先，配置数据库包环境：
```bash
cd packages/db
cp .env.example .env 
```

更新您的`packages/db/.env`文件中的数据库URL：
```bash
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/simstudio"
```

然后运行迁移：
```bash
cd packages/db # 需要这样drizzle才能选择正确的.env文件
bunx drizzle-kit migrate --config=./drizzle.config.ts
```

5. 启动开发服务器：

**推荐方法 - 一起运行两个服务器（从项目根目录）：**

```bash
bun run dev:full
```

这将启动主Next.js应用程序和实时套接字服务器，实现完整功能。

**替代方案 - 分别运行服务器：**

Next.js应用程序（从项目根目录）：
```bash
bun run dev
```

实时套接字服务器（从`apps/sim`目录在单独的终端中）：
```bash
cd apps/sim
bun run dev:sockets
```

## Copilot API密钥

Copilot是Sim管理的服务。要在自托管实例上使用Copilot：

- 前往 https://sim.ai → Settings → Copilot 并生成Copilot API密钥
- 在您的自托管apps/sim/.env文件中设置`COPILOT_API_KEY`环境变量为该值

## 环境变量

自托管部署的关键环境变量（完整的列表请参见`apps/sim/.env.example`）：

| 变量 | 必需 | 描述 |
|------|------|------|
| `DATABASE_URL` | 是 | 带有pgvector的PostgreSQL连接字符串 |
| `BETTER_AUTH_SECRET` | 是 | 认证密钥（`openssl rand -hex 32`） |
| `BETTER_AUTH_URL` | 是 | 您的应用URL（例如，`http://localhost:3000`） |
| `NEXT_PUBLIC_APP_URL` | 是 | 公共应用URL（与上面相同） |
| `ENCRYPTION_KEY` | 是 | 加密密钥（`openssl rand -hex 32`） |
| `OLLAMA_URL` | 否 | Ollama服务器URL（默认：`http://localhost:11434`） |
| `VLLM_BASE_URL` | 否 | 自托管模型的vLLM服务器URL |
| `COPILOT_API_KEY` | 否 | 来自sim.ai的Copilot功能API密钥 |

## 故障排除

### Ollama模型未在Docker的下拉菜单中显示

如果您在主机机器上运行Ollama而在Docker中运行Sim，请将`OLLAMA_URL`从`localhost`更改为`host.docker.internal`：

```bash
OLLAMA_URL=http://host.docker.internal:11434 docker compose -f docker-compose.prod.yml up -d
```

详情请参阅[使用外部Ollama实例](#using-an-external-ollama-instance)。

### 数据库连接问题

确保PostgreSQL已安装pgvector扩展。使用Docker时，在运行迁移之前请等待数据库健康。

### 端口冲突

如果端口3000、3002或5432被占用，请配置替代方案：

```bash
# 自定义端口
NEXT_PUBLIC_APP_URL=http://localhost:3100 POSTGRES_PORT=5433 docker compose up -d
```

## 技术栈

- **框架**：[Next.js](https://nextjs.org/) (App Router)
- **运行时**：[Bun](https://bun.sh/)
- **数据库**：带有[Drizzle ORM](https://orm.drizzle.team)的PostgreSQL
- **认证**：[Better Auth](https://better-auth.com)
- **UI**：[Shadcn](https://ui.shadcn.com/), [Tailwind CSS](https://tailwindcss.com)
- **状态管理**：[Zustand](https://zustand-demo.pmnd.rs/)
- **流程编辑器**：[ReactFlow](https://reactflow.dev/)
- **文档**：[Fumadocs](https://fumadocs.vercel.app/)
- **多仓库**：[Turborepo](https://turborepo.org/)
- **实时**：[Socket.io](https://socket.io/)
- **后台任务**：[Trigger.dev](https://trigger.dev/)
- **远程代码执行**：[E2B](https://www.e2b.dev/)

## 贡献

我们欢迎贡献！详情请查看我们的[贡献指南](.github/CONTRIBUTING.md)。

## 许可证

本项目采用Apache License 2.0许可证 - 详情请参阅[LICENSE](LICENSE)文件。

<p align="center">由Sim团队用❤️制作</p>
